import{aD as y,u as j,v as N,w as d,aF as k,x as v,j as s,Y as C,aE as m,V as L,y as S,X as n}from"./index-CakHYcA3.js";import{u as E,r as u,d as F,L as $}from"./vendor-Q6Ve1T67.js";const T=()=>{const w=E(),{urlApi:f}=u.useContext(y),{t:e}=j(),x=F(),b=new URLSearchParams(x.search).get("token"),[i,a]=u.useState(!1),h=N({newPassword:d().required(e("resetPassword.newPasswordRequired")),confirmPassword:d().oneOf([k("newPassword")],e("resetPassword.passwordsMustMatch"))}),{control:l,handleSubmit:p,reset:P}=v({resolver:S(h),defaultValues:{newPassword:"",confirmPassword:""}}),g=async c=>{a(!0);try{const r={password:c.newPassword,confirmPassword:c.confirmPassword,token:b},t=await fetch(f+"password-reset/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),o=await t.json();if(o){n.success(o.message),P(),w("/auth/sign-in"),a(!1);return}if(!t.ok)throw n.error(o.message),new Error(`Error ${t.status}: ${t.statusText}`);a(!1)}catch(r){n.error(r.message),a(!1)}};return s.jsxs(s.Fragment,{children:[s.jsx(C,{title:e("resetPassword.title")}),s.jsxs("form",{onSubmit:p(g),className:"mt-10 shrink",children:[s.jsx(m,{label:e("resetPassword.newPasswordLabel"),containerClassName:"mb-4",name:"newPassword",labelClassName:"block text-base/normal text-zinc-200 font-semibold",fullWidth:!0,className:"block w-full rounded border-white/10 py-2.5 bg-transparent text-white/80 focus:border-white/25 focus:outline-0 focus:ring-0",control:l}),s.jsx(m,{label:e("resetPassword.confirmPasswordLabel"),containerClassName:"mb-4",name:"confirmPassword",labelClassName:"block text-base/normal text-zinc-200 font-semibold",fullWidth:!0,className:"block w-full rounded border-white/10 py-2.5 bg-transparent text-white/80 focus:border-white/25 focus:outline-0 focus:ring-0",control:l}),s.jsx("div",{className:"mb-6 flex flex-col justify-center gap-4",children:s.jsxs("button",{type:"submit",className:"relative inline-flex w-full items-center justify-center rounded bg-primary px-6 py-3 text-base capitalize text-white transition-all hover:bg-primary-700",children:[e(i?"resetPassword.loading":"resetPassword.saveButton"),i&&s.jsx(L,{className:"animate-spin"})]})})]}),s.jsxs("p",{className:"shrink text-center text-zinc-200",children:[e("resetPassword.alreadyHaveAccount"),s.jsx($,{to:"/auth/sign-in",className:"ms-1 text-primary",children:s.jsx("b",{children:e("resetPassword.signIn")})})]})]})};export{T as default};
