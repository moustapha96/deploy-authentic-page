import{j as e,ae as l,g as v,u as D,af as k,aM as A,aN as L}from"./index-Xzk6N-ZT.js";import{L as o,r as a}from"./vendor-iLaNCrNf.js";import{F as m,U as u}from"./react-apexcharts.min-D3yFVVeQ.js";const z=({demandesCount:t,demandesRejeteCount:s,demandesAccepteCount:r,documentsCount:i})=>e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"rounded-md border border-default-200 bg-white dark:bg-default-50",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-default-600",children:"Nombre de demandes"}),e.jsxs("span",{className:"text-teal-500",children:[e.jsx(l,{className:"me-1 inline size-4"}),t,"%"]})]}),e.jsxs("div",{className:"flex items-end justify-between gap-4",children:[e.jsx("h3",{className:"text-3xl font-medium text-default-800",children:t}),e.jsx(m,{size:70})]})]})})}),e.jsx("div",{className:"rounded-md border border-default-200 bg-white dark:bg-default-50",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-default-600",children:"Nombre de demandes acceptées"}),e.jsxs("span",{className:"text-teal-500",children:[e.jsx(l,{className:"me-1 inline size-4"}),r,"%"]})]}),e.jsxs("div",{className:"flex items-end justify-between gap-4",children:[e.jsx("h3",{className:"text-3xl font-medium text-default-800",children:r}),e.jsx(u,{size:70})]})]})})}),e.jsx("div",{className:"rounded-md border border-default-200 bg-white dark:bg-default-50",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-default-600",children:"Nombre de demandes rejetées"}),e.jsxs("span",{className:"text-teal-500",children:[e.jsx(l,{className:"me-1 inline size-4"}),s,"%"]})]}),e.jsxs("div",{className:"flex items-end justify-between gap-4",children:[e.jsx("h3",{className:"text-3xl font-medium text-default-800",children:s}),e.jsx(u,{size:70})]})]})})}),e.jsx("div",{className:"rounded-md border border-default-200 bg-white dark:bg-default-50",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-default-600",children:"Nombre de documents"}),e.jsxs("span",{className:"text-teal-500",children:[e.jsx(l,{className:"me-1 inline size-4"}),i,"%"]})]}),e.jsxs("div",{className:"flex items-end justify-between gap-4",children:[e.jsx("h3",{className:"text-3xl font-medium text-default-800",children:i}),e.jsx(m,{size:70})]})]})})})]}),S=({demandes:t})=>(console.log(t),e.jsxs("div",{className:"overflow-hidden rounded-md border border-default-200 bg-white dark:bg-default-50",children:[e.jsx("div",{className:"flex items-center justify-between border-b border-default-200 px-4 py-3",children:e.jsx("h4",{className:"uppercase",children:"Recent Orders"})}),e.jsx("div",{className:"overflow-auto",children:e.jsx("div",{className:"inline-block min-w-full align-middle",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Intitulé"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Demandeur"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de Demande"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Année d'Obtention"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Résultat"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t&&t.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",s.id]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.intitule}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.demandeur.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.dateDemande).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.anneeObtention}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:v("px-2 inline-flex text-xs leading-5 font-semibold rounded-full",s.resultat==="Accepted"?"bg-green-100 text-green-800":s.resultat==="Declined"?"bg-red-100 text-red-800":s.resultat==="Pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:s.resultat})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium flex justify-between gap-4  ",children:[s.resultat==="Pending"&&e.jsx(o,{to:`/institut/authentifier/${s.id}/demande`,className:"text-rougeLogo hover:bg-rougeLogo hover:text-white transition-colors duration-200  border-2 border-rougeLogo rounded-md px-2 py-1",children:"Authentifier"}),e.jsx(o,{to:`/institut/demande/${s.id}/details`,className:"text-primary hover:text-white hover:bg-blueLogo transition-colors duration-200 border-2 border-blueLogo rounded-md px-2 py-1",children:"Détails"})]})]},s.id))})]})})})})]})),P=()=>{const{isAuthenticated:t,role:s,session:r,institut:i}=D();console.log(i);const[c,h]=a.useState([]),[p,j]=a.useState([]),[g,f]=a.useState([]),[N,b]=a.useState([]),[R,y]=a.useState(!0),[E,w]=a.useState(null);return a.useEffect(()=>{(async()=>{try{const[d,x]=await Promise.all([A(i.id),L(i.id)]);f(d.filter(n=>n.status==="Accepted")),j(d.filter(n=>n.status==="Rejected")),h(d),b(x),console.log("documents "+x.length)}catch(d){w(d.message)}finally{y(!1)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"Dashboard"}),e.jsx("section",{children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"my-6 space-y-6",children:[e.jsx(z,{demandesCount:c.length,demandesRejeteCount:p.length,demandesAccepteCount:g.length,documentsCount:N.length}),e.jsx("div",{className:"grid gap-6 lg:grid-cols-1",children:e.jsx(S,{demandes:c.slice(0,3)})})]})})})]})};export{P as default};
